{
  "version": 3,
  "sources": ["../src/index.ts", "../src/effect.ts", "../../shared/src/index.ts", "../src/reactive.ts"],
  "sourcesContent": ["import { isObject } from \"@vue/shared\";\n// console.log(isObject(\"\u6D4B\u8BD52\u4E2A\u5305\u4E4B\u95F4\u5F15\u7528\"));\nexport { effect } from \"./effect\";\nexport { reactive } from \"./reactive\";\n", "export function effect(fn) {\n  const _effect = new ReactiveEffect(fn);\n  _effect.run(); //\u9ED8\u8BA4\u5148\u6267\u884C\u4E00\u6B21\n}\n\nexport let activeEffect = undefined;\n//\u521B\u5EFA\u54CD\u5E94\u5F0F\u7684Effect \u526F\u4F5C\u7528\u51FD\u6570\nclass ReactiveEffect {\n  public active = true; //\u9ED8\u8BA4\u6FC0\u6D3B\u72B6\u6001\n  constructor(public fn) {\n    if (!this.active) {\n      //\u5982\u679C\u4E0D\u662F\u975E\u6FC0\u6D3B\u72B6\u6001\u53EA\u9700\u8981\u6267\u884C\u51FD\u6570\uFF0C\u4E0D\u8FDB\u884C\u4F9D\u8D56\u6536\u96C6\n      this.fn();\n    }\n    //\u8FD9\u91CC\u5F00\u59CB\u4F9D\u8D56\u6536\u96C6,\u5C06\u5F53\u524D\u7684effect\u548C\u7A0D\u540E\u6E32\u67D3\u7684\u5C5E\u6027\u5173\u8054\u5728\u4E00\u8D77\n    try {\n      activeEffect = this;\n      return this.fn();\n    } finally {\n      activeEffect = undefined;\n    }\n  }\n  run() {}\n}\n", "export const isObject = (value) => {\n  return typeof value === \"object\" && value !== null;\n};\n", "import { isObject } from \"@vue/shared\";\n\n// \u4F7F\u7528\u5F31\u5F15\u7528\u589E\u52A0\u7F13\u5B58\uFF0C\u9632\u6B62\u88AB\u4EE3\u7406\u591A\u6B21\nconst reactiveMap = new WeakMap(); //key \u53EA\u80FD\u662F\u5BF9\u8C61\n\nconst enum ReactiveFlag {\n  IS_REACTIVE = \"v_isReactive\",\n}\n\nexport function reactive(target) {\n  if (!isObject) return;\n  //\u9632\u6B62\u540C\u4E00\u4E2A\u5BF9\u8C61\u88AB\u4EE3\u7406\u591A\u6B21\uFF0C\u589E\u52A0\u7F13\u5B58\u89E3\u51B3\n  let existProxy = reactiveMap.get(target);\n  if (existProxy) return existProxy;\n\n  //\u7B2C\u4E00\u6B21\u666E\u901A\u5BF9\u8C61\u4EE3\u7406\uFF0C\u4F1A\u4EE3\u7406\u4E00\u6B21\uFF0C\u4E0B\u4E00\u6B21\u5982\u679C\u628Aproxy\u518D\u6B21\u4EE3\u7406\uFF0C\u5148\u5224\u65AD\u662F\u4E0D\u662F\u5DF2\u7ECF\u4EE3\u7406\u8FC7\u4E86\uFF0C\u901A\u8FC7\u8BBF\u95EEproxy\u7684\u6709\u6CA1\u6709get\u65B9\u6CD5\n  if (target[ReactiveFlag.IS_REACTIVE]) {\n    return target;\n  }\n\n  //\u9700\u8981\u642D\u914DReflect\u4F7F\u7528\uFF0C\u6539\u53D8this\u6307\u5411\u95EE\u9898\n  const proxy = new Proxy(target, {\n    get(target, key, receiver) {\n      if (key === ReactiveFlag.IS_REACTIVE) {\n        return true;\n      }\n\n      return Reflect.get(target, key, reactive);\n    },\n    set(target, key, value, receiver) {\n      return Reflect.set(target, key, value, receiver);\n    },\n  });\n  reactiveMap.set(target, proxy);\n  return proxy;\n  // let target = {\n  //   name: \"name\",\n  //   get alias() {\n  //     return this.name;\n  //   },\n  // };\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACAO,WAAS,OAAO,IAAI;AACzB,UAAM,UAAU,IAAI,eAAe,EAAE;AACrC,YAAQ,IAAI;AAAA,EACd;AAEO,MAAI,eAAe;AAE1B,MAAM,iBAAN,MAAqB;AAAA,IAEnB,YAAmB,IAAI;AAAJ;AADnB,WAAO,SAAS;AAEd,UAAI,CAAC,KAAK,QAAQ;AAEhB,aAAK,GAAG;AAAA,MACV;AAEA,UAAI;AACF,uBAAe;AACf,eAAO,KAAK,GAAG;AAAA,MACjB,UAAE;AACA,uBAAe;AAAA,MACjB;AAAA,IACF;AAAA,IACA,MAAM;AAAA,IAAC;AAAA,EACT;;;ACvBO,MAAM,WAAW,CAAC,UAAU;AACjC,WAAO,OAAO,UAAU,YAAY,UAAU;AAAA,EAChD;;;ACCA,MAAM,cAAc,oBAAI,QAAQ;AAMzB,WAAS,SAAS,QAAQ;AAC/B,QAAI,CAAC;AAAU;AAEf,QAAI,aAAa,YAAY,IAAI,MAAM;AACvC,QAAI;AAAY,aAAO;AAGvB,QAAI,OAAO,mCAA2B;AACpC,aAAO;AAAA,IACT;AAGA,UAAM,QAAQ,IAAI,MAAM,QAAQ;AAAA,MAC9B,IAAIA,SAAQ,KAAK,UAAU;AACzB,YAAI,QAAQ,kCAA0B;AACpC,iBAAO;AAAA,QACT;AAEA,eAAO,QAAQ,IAAIA,SAAQ,KAAK,QAAQ;AAAA,MAC1C;AAAA,MACA,IAAIA,SAAQ,KAAK,OAAO,UAAU;AAChC,eAAO,QAAQ,IAAIA,SAAQ,KAAK,OAAO,QAAQ;AAAA,MACjD;AAAA,IACF,CAAC;AACD,gBAAY,IAAI,QAAQ,KAAK;AAC7B,WAAO;AAAA,EAOT;",
  "names": ["target"]
}
